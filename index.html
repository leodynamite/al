<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL Bot - –õ–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            line-height: 1.6;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            font-weight: bold;
        }
        
        .title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: var(--tg-theme-hint-color, #999999);
            font-size: 16px;
        }
        
        .card {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--tg-theme-section-separator-color, #e5e5e5);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 12px;
        }
        
        .btn-primary {
            background: var(--tg-theme-button-color, #007aff);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .btn-secondary {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            color: var(--tg-theme-text-color, #000000);
            border: 1px solid var(--tg-theme-section-separator-color, #e5e5e5);
        }
        
        .btn:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }
        
        .upload-area {
            border: 2px dashed var(--tg-theme-section-separator-color, #e5e5e5);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.2s;
        }
        
        .upload-area:hover {
            border-color: var(--tg-theme-button-color, #007aff);
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
        }
        
        .upload-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .file-input {
            display: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--tg-theme-section-separator-color, #e5e5e5);
            border-radius: 4px;
            overflow: hidden;
            margin: 16px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--tg-theme-button-color, #007aff);
            transition: width 0.3s;
        }
        
        .questionnaire {
            display: none;
        }
        
        .question {
            margin-bottom: 24px;
        }
        
        .question-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .option {
            padding: 12px 16px;
            border: 1px solid var(--tg-theme-section-separator-color, #e5e5e5);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
        }
        
        .option.selected {
            background: var(--tg-theme-button-color, #007aff);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .script-preview {
            display: none;
        }
        
        .script-question {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .script-question-text {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .script-question-type {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999999);
        }
        
        .metrics {
            display: none;
        }
        
        .metric-card {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--tg-theme-button-color, #007aff);
        }
        
        .metric-label {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999999);
            margin-top: 4px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--tg-theme-section-separator-color, #e5e5e5);
            border-top: 4px solid var(--tg-theme-button-color, #007aff);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="main-page">
            <div class="header">
                <div class="logo">AL</div>
                <div class="title">AL Bot</div>
                <div class="subtitle">AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ –ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</div>
            </div>
            
            <div class="card">
                <div class="card-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                <button class="btn btn-primary" onclick="showUpload()">
                    üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                </button>
                <button class="btn btn-secondary" onclick="showQuestionnaire()">
                    ‚ùì –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
                </button>
                <button class="btn btn-secondary" onclick="showDemo()">
                    üëÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ–º–æ
                </button>
                <button class="btn btn-secondary" onclick="showPricing()">
                    üí∞ –¢–∞—Ä–∏—Ñ—ã
                </button>
            </div>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
        <div id="upload-page" class="hidden">
            <div class="header">
                <div class="title">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</div>
                <div class="subtitle">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: CSV, Excel, PDF, DOCX</div>
            </div>
            
            <div class="upload-area" onclick="document.getElementById('file-input').click()">
                <div class="upload-icon">üìÅ</div>
                <div>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</div>
                <input type="file" id="file-input" class="file-input" accept=".csv,.xlsx,.xls,.pdf,.docx,.txt">
            </div>
            
            <div id="upload-progress" class="hidden">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div id="upload-status">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ñ–∞–π–ª...</div>
            </div>
            
            <button class="btn btn-secondary" onclick="showMain()">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
        
        <!-- –û–ø—Ä–æ—Å–Ω–∏–∫ -->
        <div id="questionnaire-page" class="hidden">
            <div class="header">
                <div class="title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞</div>
                <div class="subtitle">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤</div>
            </div>
            
            <div id="questionnaire-content">
                <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <button class="btn btn-primary" onclick="submitQuestionnaire()" id="submit-btn" disabled>
                –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
            </button>
            <button class="btn btn-secondary" onclick="showMain()">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
        
        <!-- –ü—Ä–µ–≤—å—é —Å–∫—Ä–∏–ø—Ç–∞ -->
        <div id="script-preview" class="hidden">
            <div class="header">
                <div class="title">–°–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤</div>
                <div class="subtitle">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã</div>
            </div>
            
            <div id="script-questions">
                <!-- –í–æ–ø—Ä–æ—Å—ã —Å–∫—Ä–∏–ø—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <button class="btn btn-primary" onclick="applyScript()">
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
            </button>
            <button class="btn btn-secondary" onclick="editScript()">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </button>
            <button class="btn btn-secondary" onclick="testScript()">
                üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>
        
        <!-- –ú–µ—Ç—Ä–∏–∫–∏ -->
        <div id="metrics-page" class="hidden">
            <div class="header">
                <div class="title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                <div class="subtitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞</div>
            </div>
            
            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-value" id="total-leads">0</div>
                    <div class="metric-label">–í—Å–µ–≥–æ –ª–∏–¥–æ–≤</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="hot-leads">0</div>
                    <div class="metric-label">–ì–æ—Ä—è—á–∏—Ö –ª–∏–¥–æ–≤</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="conversion-rate">0%</div>
                    <div class="metric-label">–ö–æ–Ω–≤–µ—Ä—Å–∏—è</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="meetings">0</div>
                    <div class="metric-label">–í—Å—Ç—Ä–µ—á –Ω–∞–∑–Ω–∞—á–µ–Ω–æ</div>
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="exportData()">
                üìä –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
            </button>
            <button class="btn btn-secondary" onclick="showMain()">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loading" class="hidden">
            <div class="loading">
                <div class="spinner"></div>
                <div id="loading-text">–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –¥–∞–Ω–Ω—ã–µ...</div>
            </div>
        </div>
    </div>

    <script>
        // Telegram WebApp API
        const tg = window.Telegram.WebApp;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.ready();
        tg.expand();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentPage = 'main';
        let questionnaireAnswers = {};
        let currentQuestion = 0;
        
        // –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞
        const questions = [
            {
                id: 'business_type',
                text: '–¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
                type: 'single',
                options: ['–ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞', '–í—Ç–æ—Ä–∏—á–∫–∞', '–ê—Ä–µ–Ω–¥–∞', '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è', '–°–º–µ—à–∞–Ω–Ω–æ–µ']
            },
            {
                id: 'average_check',
                text: '–°—Ä–µ–¥–Ω–∏–π —á–µ–∫',
                type: 'single',
                options: ['<3–º–ª–Ω', '3‚Äì7–º–ª–Ω', '7‚Äì15–º–ª–Ω', '>15–º–ª–Ω', '–ù–µ –∑–Ω–∞—é']
            },
            {
                id: 'acquisition_channel',
                text: '–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è',
                type: 'single',
                options: ['–ê–≤–∏—Ç–æ', '–¶–∏–∞–Ω', 'Instagram', '–†–µ–∫–ª–∞–º–∞', '–ü—Ä—è–º—ã–µ –∑–≤–æ–Ω–∫–∏', '–î—Ä—É–≥–æ–µ']
            },
            {
                id: 'script_goal',
                text: '–¶–µ–ª—å —Å–∫—Ä–∏–ø—Ç–∞',
                type: 'multiple',
                options: ['–ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–∫–∞–∑', '–ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–æ–∑–≤–æ–Ω', '–°–æ–±—Ä–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ü–µ–Ω–∫—É', '–ü–æ–¥–ø–∏—Å–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä']
            },
            {
                id: 'client_urgency',
                text: '–°—Ä–æ—á–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤',
                type: 'single',
                options: ['–°—Ä–æ—á–Ω–æ (–Ω–µ–¥–µ–ª–∏)', '–°—Ä–µ–¥–Ω–µ (1‚Äì3 –º–µ—Å)', '–î–ª–∏—Ç–µ–ª—å–Ω–æ (>3 –º–µ—Å)']
            },
            {
                id: 'region',
                text: '–†–µ–≥–∏–æ–Ω / –≥–æ—Ä–æ–¥',
                type: 'text'
            },
            {
                id: 'agents_count',
                text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥–µ–Ω—Ç–æ–≤',
                type: 'number'
            },
            {
                id: 'outbound_bot',
                text: '–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –±–æ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –¥–∏–∞–ª–æ–≥–∏ —Å–∞–º?',
                type: 'single',
                options: ['–î–∞', '–ù–µ—Ç']
            }
        ];
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showPage(pageId) {
            document.querySelectorAll('[id$="-page"], #script-preview, #metrics-page, #loading').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            currentPage = pageId;
        }
        
        function showMain() {
            showPage('main-page');
        }
        
        function showUpload() {
            showPage('upload-page');
        }
        
        function showQuestionnaire() {
            showPage('questionnaire-page');
            renderQuestionnaire();
        }
        
        function showDemo() {
            tg.showAlert('–î–µ–º–æ —Ä–µ–∂–∏–º\n\n–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.');
        }
        
        function showPricing() {
            tg.showAlert('–¢–∞—Ä–∏—Ñ—ã\n\n‚Ä¢ Basic: 9 900 ‚ÇΩ/–º–µ—Å\n‚Ä¢ Pro: 19 900 ‚ÇΩ/–º–µ—Å\n‚Ä¢ Enterprise: 39 900 ‚ÇΩ/–º–µ—Å');
        }
        
        function showMetrics() {
            showPage('metrics-page');
            loadMetrics();
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
        document.getElementById('file-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                uploadFile(file);
            }
        });
        
        function uploadFile(file) {
            document.getElementById('upload-progress').classList.remove('hidden');
            
            // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        processFile(file);
                    }, 500);
                }
                document.getElementById('progress-fill').style.width = progress + '%';
            }, 200);
        }
        
        function processFile(file) {
            showLoading('–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ñ–∞–π–ª...');
            
            setTimeout(() => {
                hideLoading();
                // –°–∏–º—É–ª—è—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞
                generateScript();
            }, 3000);
        }
        
        // –û–ø—Ä–æ—Å–Ω–∏–∫
        function renderQuestionnaire() {
            const content = document.getElementById('questionnaire-content');
            content.innerHTML = '';
            
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <div class="question-text">${index + 1}. ${question.text}</div>
                    <div class="options" id="options-${question.id}">
                        ${renderQuestionOptions(question)}
                    </div>
                `;
                content.appendChild(questionDiv);
            });
        }
        
        function renderQuestionOptions(question) {
            if (question.type === 'text') {
                return `<input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç" onchange="setAnswer('${question.id}', this.value)" style="width: 100%; padding: 12px; border: 1px solid #e5e5e5; border-radius: 8px;">`;
            } else if (question.type === 'number') {
                return `<input type="number" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ" onchange="setAnswer('${question.id}', this.value)" style="width: 100%; padding: 12px; border: 1px solid #e5e5e5; border-radius: 8px;">`;
            } else {
                return question.options.map(option => `
                    <div class="option" onclick="selectOption('${question.id}', '${option}', ${question.type === 'multiple'})">
                        ${option}
                    </div>
                `).join('');
            }
        }
        
        function selectOption(questionId, value, isMultiple) {
            const options = document.querySelectorAll(`#options-${questionId} .option`);
            options.forEach(option => {
                if (option.textContent === value) {
                    if (isMultiple) {
                        option.classList.toggle('selected');
                    } else {
                        option.classList.add('selected');
                        options.forEach(opt => {
                            if (opt !== option) opt.classList.remove('selected');
                        });
                    }
                }
            });
            
            setAnswer(questionId, value);
        }
        
        function setAnswer(questionId, value) {
            questionnaireAnswers[questionId] = value;
            checkQuestionnaireComplete();
        }
        
        function checkQuestionnaireComplete() {
            const requiredQuestions = questions.filter(q => q.type !== 'text' && q.type !== 'number');
            const answeredQuestions = Object.keys(questionnaireAnswers).length;
            const submitBtn = document.getElementById('submit-btn');
            
            if (answeredQuestions >= requiredQuestions.length) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }
        
        function submitQuestionnaire() {
            showLoading('–ì–µ–Ω–µ—Ä–∏—Ä—É—é —Å–∫—Ä–∏–ø—Ç...');
            
            setTimeout(() => {
                hideLoading();
                generateScript();
            }, 2000);
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞
        function generateScript() {
            const script = [
                {
                    id: 'q1',
                    text: '–í –∫–∞–∫–æ–º —Ä–∞–π–æ–Ω–µ –≤—ã –∏—â–µ—Ç–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å?',
                    type: 'text',
                    mandatory: true,
                    weight: 20
                },
                {
                    id: 'q2',
                    text: '–ö–∞–∫–æ–π —É –≤–∞—Å –±—é–¥–∂–µ—Ç?',
                    type: 'text',
                    mandatory: true,
                    weight: 30
                },
                {
                    id: 'q3',
                    text: '–ö–æ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–∫—É–ø–∫—É?',
                    type: 'choice',
                    options: ['–í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞', '–í —Ç–µ—á–µ–Ω–∏–µ 3 –º–µ—Å—è—Ü–µ–≤', '–í —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞', '–ü–æ–∫–∞ –ø—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—é—Å—å'],
                    mandatory: true,
                    weight: 25
                },
                {
                    id: 'q4',
                    text: '–ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏?',
                    type: 'text',
                    mandatory: false,
                    weight: 15
                },
                {
                    id: 'q5',
                    text: '–ö–∞–∫ —Å –≤–∞–º–∏ –ª—É—á—à–µ —Å–≤—è–∑–∞—Ç—å—Å—è?',
                    type: 'choice',
                    options: ['–¢–µ–ª–µ—Ñ–æ–Ω', 'WhatsApp', 'Telegram', 'Email'],
                    mandatory: true,
                    weight: 10
                }
            ];
            
            showScriptPreview(script);
        }
        
        function showScriptPreview(script) {
            const questionsDiv = document.getElementById('script-questions');
            questionsDiv.innerHTML = '';
            
            script.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'script-question';
                questionDiv.innerHTML = `
                    <div class="script-question-text">${index + 1}. ${question.text}</div>
                    <div class="script-question-type">
                        ${question.type === 'choice' ? '–í—ã–±–æ—Ä –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤' : '–¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç'} 
                        ${question.mandatory ? '‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π' : '‚Ä¢ –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π'}
                        ‚Ä¢ –í–µ—Å: ${question.weight}
                    </div>
                `;
                questionsDiv.appendChild(questionDiv);
            });
            
            showPage('script-preview');
        }
        
        function applyScript() {
            showLoading('–ü—Ä–∏–º–µ–Ω—è—é —Å–∫—Ä–∏–ø—Ç...');
            
            setTimeout(() => {
                hideLoading();
                tg.showAlert('–°–∫—Ä–∏–ø—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω!\n\n–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.');
                showMain();
            }, 1500);
        }
        
        function editScript() {
            tg.showAlert('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞\n\n–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤.');
        }
        
        function testScript() {
            tg.showAlert('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞\n\n–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.');
        }
        
        // –ú–µ—Ç—Ä–∏–∫–∏
        function loadMetrics() {
            // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ç—Ä–∏–∫
            document.getElementById('total-leads').textContent = '47';
            document.getElementById('hot-leads').textContent = '12';
            document.getElementById('conversion-rate').textContent = '25.5%';
            document.getElementById('meetings').textContent = '8';
        }
        
        function exportData() {
            tg.showAlert('–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö\n\n–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ CSV —Ñ–æ—Ä–º–∞—Ç–µ.');
        }
        
        // –£—Ç–∏–ª–∏—Ç—ã
        function showLoading(text) {
            document.getElementById('loading-text').textContent = text;
            showPage('loading');
        }
        
        function hideLoading() {
            showPage('main-page');
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ Telegram
        tg.MainButton.setText('–û—Ç–∫—Ä—ã—Ç—å –º–µ—Ç—Ä–∏–∫–∏');
        tg.MainButton.onClick(() => {
            showMetrics();
        });
        tg.MainButton.show();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        showMain();
    </script>
</body>
</html>
